<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title color="warning">Main</ion-title>
  </ion-toolbar>
</ion-header>

<!-- <ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Main</ion-title>
    </ion-toolbar>
  </ion-header>
</ion-content>
 -->

<ion-content [fullscreen]="true">
  <ion-toolbar class="ion-padding">
    <ion-input
      fill="solid"
      type="number"
      min="0.1"
      label="Mounth"
      labelPlacement="floating"
      placeholder="Mounth"
      [(ngModel)]="convert.amount"
      [ngModelOptions]="{standalone:true}"
      (input)="convert.amount = convert.amount<=0 ? 0.1:convert.amount"
    >
    </ion-input>

    <ion-select
      fill="solid"
      [(ngModel)]="convert.from"
      [ngModelOptions]="{standalone:true}"
      label="From"
      label-placement="floating"
      color="warning"
    >
      @for (cur of allCurrencys; track $index) {
      <ion-select-option [value]="cur">{{cur}} </ion-select-option>
      }
    </ion-select>

    <ion-select
      fill="solid"
      [(ngModel)]="convert.to"
      [ngModelOptions]="{standalone:true}"
      label="To"
      label-placement="floating"
    >
      @for (cur of allCurrencys; track $index) {
      <ion-select-option [value]="cur">{{cur}}</ion-select-option>
      }@empty{
      <h2>ERROR!: Sin Currencys registrada</h2>
      }
    </ion-select>

    <ion-button
      id="btn-Convert"
      fill="outline"
      color="warning"
      (click)="getResult()"
      >Convert</ion-button
    >
    <ion-toast
      color="warning"
      position="top"
      positionAnchor="header"
      trigger="btn-Convert"
      message="Result : {{ResultConvert.convert.amount}} {{ResultConvert.convert.from}} =
    {{ResultConvert.result | number : '.1-3'}} {{ResultConvert.convert.to}}"
      [duration]="7000"
    >
    </ion-toast>

    @if(ResultConvert.result!==0){
    <br />

    <ion-text> Result </ion-text> <br />
    <ion-text>
      {{ResultConvert.convert.amount}} {{ResultConvert.convert.from}} =
      {{ResultConvert.result | number : '.1-3'}}
      {{ResultConvert.convert.to}}</ion-text
    >
    <br />
    Where:
    <ion-text color="warning"
      >1 {{ResultConvert.convert.from}} ={{ResultConvert.priceConverted}}
      {{ResultConvert.convert.to}}</ion-text
    >
    }
  </ion-toolbar>
</ion-content>

<ion-footer class="ion-padding">
  <ion-toolbar>
    <ion-text color="dark"
      >Tenemos un limite de 1500 conversiones diarias.
      <ion-icon name="ban-outline"></ion-icon
      ><ion-text color="danger"> No ABUSE </ion-text>
      que aun no tengo manejo de errores.
    </ion-text>
    <br />
    <a target="_blank" href=""> <ion-icon name="logo-github"></ion-icon>3MTB </a>
  </ion-toolbar>
</ion-footer>
